<!DOCTYPE html><html><head>
      <title>Overview</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.css">
      
      
      
      
      
      <style>
      code[class*=language-],pre[class*=language-]{color:#333;background:0 0;font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.4;-moz-tab-size:8;-o-tab-size:8;tab-size:8;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:.8em;overflow:auto;border-radius:3px;background:#f5f5f5}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal;background:#f5f5f5}.token.blockquote,.token.comment{color:#969896}.token.cdata{color:#183691}.token.doctype,.token.macro.property,.token.punctuation,.token.variable{color:#333}.token.builtin,.token.important,.token.keyword,.token.operator,.token.rule{color:#a71d5d}.token.attr-value,.token.regex,.token.string,.token.url{color:#183691}.token.atrule,.token.boolean,.token.code,.token.command,.token.constant,.token.entity,.token.number,.token.property,.token.symbol{color:#0086b3}.token.prolog,.token.selector,.token.tag{color:#63a35c}.token.attr-name,.token.class,.token.class-name,.token.function,.token.id,.token.namespace,.token.pseudo-class,.token.pseudo-element,.token.url-reference .token.variable{color:#795da3}.token.entity{cursor:help}.token.title,.token.title .token.punctuation{font-weight:700;color:#1d3e81}.token.list{color:#ed6a43}.token.inserted{background-color:#eaffea;color:#55a532}.token.deleted{background-color:#ffecec;color:#bd2c00}.token.bold{font-weight:700}.token.italic{font-style:italic}.language-json .token.property{color:#183691}.language-markup .token.tag .token.punctuation{color:#333}.language-css .token.function,code.language-css{color:#0086b3}.language-yaml .token.atrule{color:#63a35c}code.language-yaml{color:#183691}.language-ruby .token.function{color:#333}.language-markdown .token.url{color:#795da3}.language-makefile .token.symbol{color:#795da3}.language-makefile .token.variable{color:#183691}.language-makefile .token.builtin{color:#0086b3}.language-bash .token.keyword{color:#0086b3}pre[data-line]{position:relative;padding:1em 0 1em 3em}pre[data-line] .line-highlight-wrapper{position:absolute;top:0;left:0;background-color:transparent;display:block;width:100%}pre[data-line] .line-highlight{position:absolute;left:0;right:0;padding:inherit 0;margin-top:1em;background:hsla(24,20%,50%,.08);background:linear-gradient(to right,hsla(24,20%,50%,.1) 70%,hsla(24,20%,50%,0));pointer-events:none;line-height:inherit;white-space:pre}pre[data-line] .line-highlight:before,pre[data-line] .line-highlight[data-end]:after{content:attr(data-start);position:absolute;top:.4em;left:.6em;min-width:1em;padding:0 .5em;background-color:hsla(24,20%,50%,.4);color:#f4f1ef;font:bold 65%/1.5 sans-serif;text-align:center;vertical-align:.3em;border-radius:999px;text-shadow:none;box-shadow:0 1px #fff}pre[data-line] .line-highlight[data-end]:after{content:attr(data-end);top:auto;bottom:.4em}html body{font-family:'Helvetica Neue',Helvetica,'Segoe UI',Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#333;background-color:#fff;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#000}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#5c5c5c}html body strong{color:#000}html body del{color:#5c5c5c}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ol,html body>ul{margin-bottom:16px}html body ol,html body ul{padding-left:2em}html body ol.no-list,html body ul.no-list{padding:0;list-style-type:none}html body ol ol,html body ol ul,html body ul ol,html body ul ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#5c5c5c;background-color:#f0f0f0;border-left:4px solid #d6d6d6}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#d6d6d6;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:700;color:#000}html body table td,html body table th{border:1px solid #d6d6d6;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:700}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em;color:#000;background-color:#f0f0f0;border-radius:3px;padding:.2em 0}html body code::after,html body code::before{letter-spacing:-.2em;content:'\00a0'}html body pre>code{padding:0;margin:0;word-break:normal;white-space:pre;background:0 0;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;line-height:1.45;border:#d6d6d6;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:after,html body pre code:before,html body pre tt:after,html body pre tt:before{content:normal}html body blockquote,html body dl,html body ol,html body p,html body pre,html body ul{margin-top:0;margin-bottom:16px}html body kbd{color:#000;border:1px solid #d6d6d6;border-bottom:2px solid #c7c7c7;padding:2px 4px;background-color:#f0f0f0;border-radius:3px}@media print{html body{background-color:#fff}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#000;page-break-after:avoid}html body blockquote{color:#5c5c5c}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body code,html body pre{word-wrap:break-word;white-space:pre}}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview ul{list-style:disc}.markdown-preview ul ul{list-style:circle}.markdown-preview ul ul ul{list-style:square}.markdown-preview ol{list-style:decimal}.markdown-preview ol ol,.markdown-preview ul ol{list-style-type:lower-roman}.markdown-preview ol ol ol,.markdown-preview ol ul ol,.markdown-preview ul ol ol,.markdown-preview ul ul ol{list-style-type:lower-alpha}.markdown-preview .newpage,.markdown-preview .pagebreak{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center!important}.markdown-preview:not([data-for=preview]) .code-chunk .code-chunk-btn-group{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .status{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .output-div{margin-bottom:16px}.markdown-preview .md-toc{padding:0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link div,.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}.markdown-preview .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0;min-height:100vh}@media screen and (min-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px + 2em)}}@media screen and (max-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{font-size:14px!important;padding:1em}}@media print{html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc{padding:0 16px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link div,html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% - 300px);padding:2em calc(50% - 457px - 300px / 2);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */

      </style>
      <!-- The content below will be included at the end of the <head> element. --><script type="text/javascript">
  document.addEventListener("DOMContentLoaded", function () {
    // your code here
  });
</script></head><body for="html-export">
    
    
      <div class="crossnote markdown-preview  ">
      
<h1 id="military-asset-management-system-mams---project-documentation">Military Asset Management System (MAMS) - Project Documentation </h1>
<h2 id="1-project-overview">1. Project Overview </h2>
<p>The <strong>Military Asset Management System (MAMS)</strong> is a full-stack web application designed to provide a centralized, secure platform for tracking and managing military assets across various bases. Its primary purpose is to enhance accountability, streamline logistics, and provide real-time insights into asset availability and movement.</p>
<h3 id="description">Description </h3>
<p>MAMS facilitates the entire lifecycle of military assets, from <strong>procurement (purchases)</strong> and <strong>distribution (transfers)</strong> to <strong>operational deployment (assignments)</strong> and eventual <strong>decommissioning (expenditures)</strong>. It offers a user-friendly interface for different roles within the military hierarchy to perform specific tasks while ensuring data integrity and security.</p>
<h3 id="assumptions">Assumptions </h3>
<ul>
<li>A <strong>PostgreSQL database server</strong> is available and accessible.</li>
<li>Users have <strong>basic computer literacy</strong> to interact with the web application.</li>
<li><strong>Network connectivity</strong> between the frontend, backend, and database is stable.</li>
<li><strong>Unique identifiers (UUIDs)</strong> are used for all primary keys to ensure global uniqueness.</li>
</ul>
<h3 id="limitations">Limitations </h3>
<ul>
<li><strong>No Physical Asset Tracking (GPS/RFID)</strong>: Tracks assets logically within the database, not via real-time physical location tracking hardware.</li>
<li><strong>No Complex Reporting Engine</strong>: Provides dashboard metrics and historical data but lacks an advanced, customizable reporting engine.</li>
<li><strong>No Maintenance Scheduling</strong>: Current version does not include features for scheduling or tracking asset maintenance.</li>
<li><strong>No Multi-Factor Authentication (MFA)</strong>: Authentication relies on username/password and JWTs, without MFA.</li>
<li><strong>Real-time Asset Balance Calculation</strong>: <code>asset_balances</code> are updated transactionally. A daily cron job for <code>opening_balance</code> rollover is recommended for perfect historical accuracy but not implemented as a separate service.</li>
</ul>
<h2 id="2-tech-stack--architecture">2. Tech Stack &amp; Architecture </h2>
<p>MAMS employs a standard <strong>three-tier architecture</strong>: Frontend, Backend, and Database, communicating via a <strong>RESTful API</strong>.</p>
<h3 id="backend">Backend </h3>
<ul>
<li><strong>Technology</strong>: Node.js with Express.js</li>
<li><strong>Why Chosen</strong>: Node.js offers a non-blocking, event-driven architecture, ideal for I/O-bound API operations. Express.js provides a minimalist, flexible framework for building robust APIs quickly, suitable for scalable web applications.</li>
<li><strong>Key Libraries</strong>:
<ul>
<li><code>pg</code>: PostgreSQL client for database interaction.</li>
<li><code>bcryptjs</code>: Secure password hashing.</li>
<li><code>jsonwebtoken</code>: Creating and verifying JWTs.</li>
<li><code>cors</code>: Middleware for Cross-Origin Resource Sharing.</li>
<li><code>morgan</code>: HTTP request logger.</li>
</ul>
</li>
</ul>
<h3 id="frontend">Frontend </h3>
<ul>
<li><strong>Technology</strong>: React.js with Vite</li>
<li><strong>Why Chosen</strong>: React.js is a component-based library for dynamic, interactive UIs, with a virtual DOM for efficient updates. Vite provides a fast development server and build process, improving developer experience.</li>
<li><strong>Key Libraries</strong>:
<ul>
<li><code>axios</code>: Promise-based HTTP client for API requests.</li>
<li><code>react-router-dom</code>: Client-side routing.</li>
<li><code>lucide-react</code>: Consistent, modern icon set.</li>
<li><code>tailwindcss</code>: Utility-first CSS framework for rapid, responsive UI development.</li>
</ul>
</li>
</ul>
<h3 id="database">Database </h3>
<ul>
<li><strong>Technology</strong>: PostgreSQL</li>
<li><strong>Why Chosen</strong>: PostgreSQL is a reliable, open-source, object-relational database with robust features, complex query support, and strong integrity constraints, ideal for managing critical asset data.</li>
</ul>
<h3 id="architecture-diagram-textual-representation">Architecture Diagram (Textual Representation) </h3>
<pre data-role="codeBlock" data-info="bash" class="language-bash bash"><code>+------------------------------------+
<span class="token operator">|</span>             <span class="token environment constant">USER</span>                   <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token punctuation">(</span>Web Browser / Client Device<span class="token punctuation">)</span>      <span class="token operator">|</span>
+------------------------------------+
<span class="token operator">|</span>
<span class="token operator">|</span> HTTP/HTTPS
<span class="token function">v</span>
+--------------------------------------------------------------------------------+
<span class="token operator">|</span>                             FRONTEND APPLICATION                               <span class="token operator">|</span>
<span class="token operator">|</span>                     <span class="token punctuation">(</span>React.js, Tailwind CSS, Vite<span class="token punctuation">)</span>                             <span class="token operator">|</span>
<span class="token operator">|</span>                                                                                <span class="token operator">|</span>
<span class="token operator">|</span>  +---------------------------------+   +---------------------------------+   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token operator">|</span>       React.js Components       <span class="token operator">|</span>   <span class="token operator">|</span>      Authentication Context     <span class="token operator">|</span>   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token punctuation">(</span>Pages: Dashboard, Purchases,  <span class="token operator">|</span>   <span class="token operator">|</span>    <span class="token punctuation">(</span>Manages user state, JWT<span class="token punctuation">)</span>    <span class="token operator">|</span>   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token operator">|</span>   Transfers, Assets, Users, etc.<span class="token punctuation">)</span><span class="token operator">|</span>   <span class="token operator">|</span>                                 <span class="token operator">|</span>   <span class="token operator">|</span>
<span class="token operator">|</span>  +---------------------------------+   +---------------------------------+   <span class="token operator">|</span>
<span class="token operator">|</span>                  <span class="token operator">|</span>                                   <span class="token operator">|</span>                       <span class="token operator">|</span>
<span class="token operator">|</span>                  <span class="token operator">|</span> <span class="token punctuation">(</span>User Interactions<span class="token punctuation">)</span>               <span class="token operator">|</span> <span class="token punctuation">(</span>Reads/Updates Auth State<span class="token punctuation">)</span>
<span class="token operator">|</span>                  <span class="token function">v</span>                                   <span class="token function">v</span>                       <span class="token operator">|</span>
<span class="token operator">|</span>  +-----------------------------------------------------------------------+   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token operator">|</span>                           API Service <span class="token punctuation">(</span>Axios<span class="token punctuation">)</span>                         <span class="token operator">|</span>   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token operator">|</span>         <span class="token punctuation">(</span>Handles HTTP requests, attaches JWT to headers<span class="token punctuation">)</span>            <span class="token operator">|</span>   <span class="token operator">|</span>
<span class="token operator">|</span>  +-----------------------------------------------------------------------+   <span class="token operator">|</span>
+--------------------------------------------------------------------------------+
<span class="token operator">|</span>
<span class="token operator">|</span> HTTP/HTTPS <span class="token punctuation">(</span>REST API Calls<span class="token punctuation">)</span>
<span class="token operator">|</span> <span class="token punctuation">(</span>JSON Web Token <span class="token punctuation">(</span>JWT<span class="token punctuation">)</span> included <span class="token keyword keyword-in">in</span> Authorization header<span class="token punctuation">)</span>
<span class="token function">v</span>
+--------------------------------------------------------------------------------+
<span class="token operator">|</span>                             BACKEND API SERVER                                 <span class="token operator">|</span>
<span class="token operator">|</span>                         <span class="token punctuation">(</span>Node.js, Express.js<span class="token punctuation">)</span>                                  <span class="token operator">|</span>
<span class="token operator">|</span>                                                                                <span class="token operator">|</span>
<span class="token operator">|</span>  +---------------------------------+   +---------------------------------+   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token operator">|</span>     Authentication Middleware   <span class="token operator">|</span>   <span class="token operator">|</span>        RBAC Middleware          <span class="token operator">|</span>   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token operator">|</span>    <span class="token punctuation">(</span>Verifies JWT, identifies    <span class="token operator">|</span>   <span class="token operator">|</span>  <span class="token punctuation">(</span>Checks user role <span class="token keyword keyword-for">for</span> route   <span class="token operator">|</span>   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token operator">|</span>    user, sets req.user<span class="token punctuation">)</span>         <span class="token operator">|</span>   <span class="token operator">|</span>    permissions<span class="token punctuation">)</span>                 <span class="token operator">|</span>   <span class="token operator">|</span>
<span class="token operator">|</span>  +---------------------------------+   +---------------------------------+   <span class="token operator">|</span>
<span class="token operator">|</span>                  <span class="token operator">|</span>                                   <span class="token operator">|</span>                       <span class="token operator">|</span>
<span class="token operator">|</span>                  <span class="token operator">|</span> <span class="token punctuation">(</span>Validated Request<span class="token punctuation">)</span>               <span class="token operator">|</span> <span class="token punctuation">(</span>Authorized Request<span class="token punctuation">)</span>  <span class="token operator">|</span>
<span class="token operator">|</span>                  <span class="token function">v</span>                                   <span class="token function">v</span>                       <span class="token operator">|</span>
<span class="token operator">|</span>  +-----------------------------------------------------------------------+   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token operator">|</span>                           Controllers                                 <span class="token operator">|</span>   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token punctuation">(</span>Business Logic <span class="token keyword keyword-for">for</span> Assets, Users, Purchases, Transfers, etc.<span class="token punctuation">)</span>      <span class="token operator">|</span>   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token punctuation">(</span>Interacts with Database via Pool<span class="token punctuation">)</span>                                   <span class="token operator">|</span>   <span class="token operator">|</span>
<span class="token operator">|</span>  +-----------------------------------------------------------------------+   <span class="token operator">|</span>
<span class="token operator">|</span>                  <span class="token operator">|</span>                                   ^                       <span class="token operator">|</span>
<span class="token operator">|</span>                  <span class="token operator">|</span> <span class="token punctuation">(</span>SQL Queries<span class="token punctuation">)</span>                     <span class="token operator">|</span> <span class="token punctuation">(</span>Query Results<span class="token punctuation">)</span>       <span class="token operator">|</span>
<span class="token operator">|</span>                  <span class="token function">v</span>                                   <span class="token operator">|</span>                       <span class="token operator">|</span>
<span class="token operator">|</span>  +-----------------------------------------------------------------------+   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token operator">|</span>                       PostgreSQL Client <span class="token punctuation">(</span>pg<span class="token punctuation">)</span>                          <span class="token operator">|</span>   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token operator">|</span>                 <span class="token punctuation">(</span>Manages connection pool to DB<span class="token punctuation">)</span>                       <span class="token operator">|</span>   <span class="token operator">|</span>
<span class="token operator">|</span>  +-----------------------------------------------------------------------+   <span class="token operator">|</span>
<span class="token operator">|</span>                                                                                <span class="token operator">|</span>
<span class="token operator">|</span>  +---------------------------------+   +---------------------------------+   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token operator">|</span>       Logging Middleware        <span class="token operator">|</span>   <span class="token operator">|</span>         CORS Middleware         <span class="token operator">|</span>   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token punctuation">(</span>Records audit events to DB<span class="token punctuation">)</span>   <span class="token operator">|</span>   <span class="token operator">|</span> <span class="token punctuation">(</span>Enables cross-origin requests<span class="token punctuation">)</span> <span class="token operator">|</span>   <span class="token operator">|</span>
<span class="token operator">|</span>  +---------------------------------+   +---------------------------------+   <span class="token operator">|</span>
+--------------------------------------------------------------------------------+
<span class="token operator">|</span>
<span class="token operator">|</span> SQL <span class="token punctuation">(</span>CRUD Operations<span class="token punctuation">)</span>
<span class="token function">v</span>
+------------------------------------+
<span class="token operator">|</span>         POSTGRESQL DATABASE        <span class="token operator">|</span>
<span class="token operator">|</span>                                    <span class="token operator">|</span>
<span class="token operator">|</span>  +------------------------------+  <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token operator">|</span> Tables:                      <span class="token operator">|</span>  <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token operator">|</span> - <span class="token function">users</span>                      <span class="token operator">|</span>  <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token operator">|</span> - bases                      <span class="token operator">|</span>  <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token operator">|</span> - equipment_types            <span class="token operator">|</span>  <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token operator">|</span> - assets                     <span class="token operator">|</span>  <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token operator">|</span> - purchases                  <span class="token operator">|</span>  <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token operator">|</span> - transfers                  <span class="token operator">|</span>  <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token operator">|</span> - assignments                <span class="token operator">|</span>  <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token operator">|</span> - expenditures               <span class="token operator">|</span>  <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token operator">|</span> - asset_balances             <span class="token operator">|</span>  <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token operator">|</span> - audit_logs                 <span class="token operator">|</span>  <span class="token operator">|</span>
<span class="token operator">|</span>  +------------------------------+  <span class="token operator">|</span>
+------------------------------------+
</code></pre><h2 id="3-data-models--schema">3. Data Models / Schema </h2>
<p>The database schema captures all necessary information about assets, their movements, and the organizational structure. All <strong>primary keys</strong> are <strong>UUIDs</strong>.</p>
<h3 id="tables">Tables </h3>
<ul>
<li>
<p><strong>users</strong>: Stores user authentication details, roles, and assigned bases.</p>
<ul>
<li><code>user_id</code> (PK, UUID)</li>
<li><code>username</code> (Unique)</li>
<li><code>password_hash</code></li>
<li><code>email</code> (Unique)</li>
<li><code>role</code> (Enum: <code>admin</code>, <code>base_commander</code>, <code>logistics_officer</code>)</li>
<li><code>base_id</code> (FK to <code>bases.base_id</code>, NULLable for Admin)</li>
</ul>
</li>
<li>
<p><strong>bases</strong>: Represents military bases where assets are stored or transferred.</p>
<ul>
<li><code>base_id</code> (PK, UUID)</li>
<li><code>base_name</code> (Unique)</li>
<li><code>location</code></li>
</ul>
</li>
<li>
<p><strong>equipment_types</strong>: Categorizes assets (e.g., 'Assault Rifle', 'Tank').</p>
<ul>
<li><code>equipment_type_id</code> (PK, UUID)</li>
<li><code>type_name</code> (Unique)</li>
<li><code>description</code></li>
</ul>
</li>
<li>
<p><strong>assets</strong>: Core table for individual assets.</p>
<ul>
<li><code>asset_id</code> (PK, UUID)</li>
<li><code>serial_number</code> (Unique)</li>
<li><code>equipment_type_id</code> (FK to <code>equipment_types.equipment_type_id</code>)</li>
<li><code>model</code></li>
<li><code>manufacturer</code></li>
<li><code>current_base_id</code> (FK to <code>bases.base_id</code>)</li>
<li><code>status</code> (Enum: <code>available</code>, <code>assigned</code>, <code>in_transit</code>, <code>expended</code>)</li>
</ul>
</li>
<li>
<p><strong>purchases</strong>: Records asset acquisitions.</p>
<ul>
<li><code>purchase_id</code> (PK, UUID)</li>
<li><code>asset_id</code> (FK to <code>assets.asset_id</code>)</li>
<li><code>base_id</code> (FK to <code>bases.base_id</code> - where purchased for)</li>
<li><code>quantity</code></li>
<li><code>unit_cost</code></li>
<li><code>total_cost</code></li>
<li><code>purchased_by</code> (FK to <code>users.user_id</code>)</li>
<li><code>purchase_date</code></li>
</ul>
</li>
<li>
<p><strong>transfers</strong>: Tracks asset movements between bases.</p>
<ul>
<li><code>transfer_id</code> (PK, UUID)</li>
<li><code>asset_id</code> (FK to <code>assets.asset_id</code>)</li>
<li><code>from_base_id</code> (FK to <code>bases.base_id</code>)</li>
<li><code>to_base_id</code> (FK to <code>bases.base_id</code>)</li>
<li><code>quantity</code></li>
<li><code>transferred_by</code> (FK to <code>users.user_id</code>)</li>
<li><code>status</code> (Enum: <code>pending</code>, <code>completed</code>, <code>cancelled</code>)</li>
<li><code>transfer_date</code></li>
<li><code>completed_at</code> (Timestamp, NULLable)</li>
</ul>
</li>
<li>
<p><strong>assignments</strong>: Records assets assigned to personnel.</p>
<ul>
<li><code>assignment_id</code> (PK, UUID)</li>
<li><code>asset_id</code> (FK to <code>assets.asset_id</code>)</li>
<li><code>assigned_to_user_id</code> (FK to <code>users.user_id</code>)</li>
<li><code>assigned_by</code> (FK to <code>users.user_id</code>)</li>
<li><code>status</code> (Enum: <code>active</code>, <code>returned</code>)</li>
<li><code>assigned_date</code></li>
<li><code>return_date</code> (Timestamp, NULLable)</li>
</ul>
</li>
<li>
<p><strong>expenditures</strong>: Records assets removed from inventory.</p>
<ul>
<li><code>expenditure_id</code> (PK, UUID)</li>
<li><code>asset_id</code> (FK to <code>assets.asset_id</code>)</li>
<li><code>base_id</code> (FK to <code>bases.base_id</code> - where expended)</li>
<li><code>quantity</code></li>
<li><code>reason</code></li>
<li><code>expended_by</code> (FK to <code>users.user_id</code>)</li>
<li><code>expenditure_date</code></li>
</ul>
</li>
<li>
<p><strong>asset_balances</strong>: Summarizes asset quantities by date, base, and equipment type. Updated transactionally.</p>
<ul>
<li><code>balance_id</code> (PK, UUID)</li>
<li><code>balance_date</code> (Date, Unique per base/equipment_type)</li>
<li><code>base_id</code> (FK to <code>bases.base_id</code>)</li>
<li><code>equipment_type_id</code> (FK to <code>equipment_types.equipment_type_id</code>)</li>
<li><code>opening_balance</code></li>
<li><code>purchases</code></li>
<li><code>transfers_in</code></li>
<li><code>transfers_out</code></li>
<li><code>assigned</code></li>
<li><code>expended</code></li>
<li><code>closing_balance</code></li>
<li><code>net_movement</code></li>
</ul>
</li>
<li>
<p><strong>audit_logs</strong>: Records significant system actions for accountability.</p>
<ul>
<li><code>log_id</code> (PK, UUID)</li>
<li><code>user_id</code> (FK to <code>users.user_id</code>, NULLable for system actions or initial admin creation)</li>
<li><code>action_type</code> (e.g., <code>USER_LOGIN</code>, <code>ASSET_CREATED</code>, <code>TRANSFER_COMPLETED</code>)</li>
<li><code>entity_type</code> (e.g., <code>user</code>, <code>asset</code>, <code>transfer</code>)</li>
<li><code>entity_id</code> (UUID, ID of the affected entity)</li>
<li><code>details</code> (JSONB, stores relevant data about the action)</li>
<li><code>ip_address</code></li>
<li><code>timestamp</code></li>
</ul>
</li>
</ul>
<h2 id="4-rbac-explanation">4. RBAC Explanation </h2>
<p><strong>Role-Based Access Control (RBAC)</strong> ensures users can only perform actions and access data relevant to their roles.</p>
<h3 id="roles">Roles </h3>
<ul>
<li><strong>Admin</strong>: Full system access. Can manage users, bases, equipment types, and all asset operations across all bases.</li>
<li><strong>Base Commander</strong>: Can view dashboard metrics, assets, assignments, and expenditures for their assigned base. Can record assignments and expenditures for assets at their base. Cannot manage users, bases, equipment types, purchases, or transfers.</li>
<li><strong>Logistics Officer</strong>: Can view dashboard metrics, assets, purchases, transfers, assignments, and expenditures. Can record purchases, transfers, assignments, and expenditures. For purchases and transfers, they can specify any base. For assignments and expenditures, they are typically restricted to their assigned base (though the current implementation allows selecting assets from any base, with backend logic ensuring the asset’s <code>current_base_id</code> matches the user’s <code>base_id</code> for base commanders).</li>
</ul>
<h3 id="access-levels-and-enforcement">Access Levels and Enforcement </h3>
<ul>
<li><strong>Authentication (<code>protect</code> middleware)</strong>:
<ul>
<li>Uses <strong>JSON Web Tokens (JWTs)</strong> for stateless authentication.</li>
<li>On login, a JWT containing <code>user_id</code>, <code>role</code>, and <code>base_id</code> is issued.</li>
<li>Token is sent in the <code>Authorization</code> header (<code>Bearer &lt;token&gt;</code>).</li>
<li><code>protect</code> middleware verifies the token and attaches user info to <code>req.user</code>.</li>
</ul>
</li>
<li><strong>Authorization (<code>authorize</code> middleware)</strong>:
<ul>
<li>Checks <code>req.user.role</code> against an <code>allowedRoles</code> array.</li>
<li>Returns a <strong>403 Forbidden</strong> error if the role is not allowed.</li>
</ul>
</li>
<li><strong>Controller-Level Granularity</strong>:
<ul>
<li>For <code>base_commander</code>, controllers enforce base-specific restrictions (e.g., <code>WHERE current_base_id = req.user.base_id</code> for asset operations).</li>
</ul>
</li>
</ul>
<h2 id="5-api-logging">5. API Logging </h2>
<p>Transaction logging is handled by the <code>logAudit</code> utility function and stored in the <code>audit_logs</code> table.</p>
<ul>
<li><strong>Mechanism</strong>:
<ul>
<li><code>logAudit</code> is called from controllers for significant actions (e.g., user login, asset creation, purchase, transfer, assignment, expenditure, user management).</li>
<li>Records <code>user_id</code>, <code>action_type</code>, <code>entity_type</code>, <code>entity_id</code>, <code>details</code> (JSONB with contextual data), and <code>ip_address</code>.</li>
</ul>
</li>
<li><strong>Purpose</strong>:
<ul>
<li><strong>Accountability</strong>: Tracks who did what and when.</li>
<li><strong>Troubleshooting</strong>: Aids debugging by reviewing past actions.</li>
<li><strong>Compliance</strong>: Meets auditing requirements for asset management.</li>
</ul>
</li>
</ul>
<h2 id="6-setup-instructions">6. Setup Instructions </h2>
<p>Follow these steps to set up and run MAMS.</p>
<h3 id="prerequisites">Prerequisites </h3>
<ul>
<li><strong>Node.js</strong> (LTS version recommended)</li>
<li><strong>npm</strong> (Node Package Manager)</li>
<li><strong>PostgreSQL</strong> database server</li>
</ul>
<h3 id="1-database-setup">1. Database Setup </h3>
<ol>
<li>
<p><strong>Create Database</strong>:</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash bash"><code>psql <span class="token parameter variable">-U</span> postgres <span class="token parameter variable">-c</span> <span class="token string">"CREATE DATABASE asset_management;"</span>

Connect and Create Schema:

 Connect to the database and execute the schema creation SQL script <span class="token punctuation">(</span>defining tables like users, assets, bases, etc.<span class="token punctuation">)</span>.
 Example:
 sql

     CREATE EXTENSION IF NOT EXISTS <span class="token string">"uuid-ossp"</span><span class="token punctuation">;</span>

     CREATE TABLE bases <span class="token punctuation">(</span>
         base_id UUID PRIMARY KEY DEFAULT uuid_generate_v4<span class="token punctuation">(</span><span class="token punctuation">)</span>,
         base_name VARCHAR<span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> UNIQUE NOT NULL,
         location TEXT,
         created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
         updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
     <span class="token punctuation">)</span><span class="token punctuation">;</span>

     -- Continue with other table creation statements
 Insert Dummy Data <span class="token punctuation">(</span>Optional<span class="token punctuation">)</span>:
     Use TRUNCATE commands, <span class="token keyword keyword-then">then</span> INSERT statements from the dummy data SQL.

</code></pre></li>
<li>
<p>Backend Setup</p>
</li>
</ol>
<h4 id="navigate-to-backend-directory">Navigate to Backend Directory: </h4>
<pre data-role="codeBlock" data-info="bash" class="language-bash bash"><code><span class="token builtin class-name">cd</span> military-asset-management/backend
Install Dependencies:
</code></pre><pre data-role="codeBlock" data-info="bash" class="language-bash bash"><code><span class="token function">npm</span> <span class="token function">install</span>
</code></pre><ul>
<li>Create .env File:<br>
env</li>
<li>DB_USER=your_postgres_user</li>
<li>DB_HOST=localhost</li>
<li>DB_DATABASE=asset_management</li>
<li>DB_PASSWORD=your_postgres_password</li>
<li>DB_PORT=5432</li>
<li>JWT_SECRET=your_super_secret_jwt_key # Use a strong, random key</li>
</ul>
<h5 id="run-backend-server">Run Backend Server: </h5>
<pre data-role="codeBlock" data-info="bash" class="language-bash bash"><code>    <span class="token function">npm</span> run dev
    <span class="token comment"># Or: node --watch server.js</span>
        Backend runs on http://localhost:5000.
</code></pre><ol start="3">
<li>
<p>Frontend Setup</p>
<p>Navigate to Frontend Directory:</p>
</li>
</ol>
<pre data-role="codeBlock" data-info="bash" class="language-bash bash"><code><span class="token builtin class-name">cd</span> military-asset-management/frontend

</code></pre><p>Install Dependencies:</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash bash"><code><span class="token function">npm</span> <span class="token function">install</span>
</code></pre><p>Run Frontend Development Server:</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash bash"><code>    <span class="token function">npm</span> run dev
    Frontend: opens at http://localhost:5173.
</code></pre><h5 id="how-to-use-the-application">How to Use the Application </h5>
<pre class="language-text">Login: Access http://localhost:5173 and use credentials (e.g., adminuser / password123 if using dummy data).
Navigation: Sidebar displays role-based navigation links.
Features:
    Dashboard: View aggregated asset metrics.
    Purchases: Record asset acquisitions.
    Transfers: Move assets between bases.
    Assignments &amp; Expenditures: Track assigned assets and record expended items.
    All Assets: View asset list and detailed history.
    User Management (Admin Only): Manage user accounts.
</pre>
<p>User Roles and Permissions</p>
<pre class="language-text">Admin: Full access to all features.
Logistics Officer: Create/view/update assets, record purchases/transfers/assignments/expenditures, view dashboard. Restricted to assigned base for certain operations.
Base Commander: View assets and metrics for their base, record assignments/expenditures for their base’s assets. No user/base/equipment type management.
</pre>
<p>API Endpoints</p>
<p>All endpoints are prefixed with /api.<br>
Authentication</p>
<pre class="language-text">POST /api/auth/register: Register a new user (Admin only).
POST /api/auth/login: Login user.
</pre>
<p>User Management</p>
<pre class="language-text">GET /api/users: Get all users.
POST /api/users: Create a new user (Admin only).
GET /api/users/:id: Get user by ID.
PUT /api/users/:id: Update a user (Admin only).
DELETE /api/users/:id: Delete a user (Admin only).
</pre>
<p>Base Management</p>
<pre class="language-text">GET /api/bases: Get all bases.
POST /api/bases: Create a new base (Admin only).
PUT /api/bases/:id: Update a base (Admin only).
DELETE /api/bases/:id: Delete a base (Admin only).
</pre>
<p>Equipment Type Management</p>
<pre class="language-text">GET /api/equipment-types: Get all equipment types.
POST /api/equipment-types: Create a new equipment type (Admin only).
PUT /api/equipment-types/:id: Update an equipment type (Admin only).
DELETE /api/equipment-types/:id: Delete an equipment type (Admin only).
</pre>
<p>Asset Management</p>
<pre class="language-text">GET /api/assets: Get all assets.
POST /api/assets: Create a new asset (Admin, Logistics Officer).
GET /api/assets/:id: Get asset by ID.
PUT /api/assets/:id: Update an asset (Admin, Logistics Officer).
DELETE /api/assets/:id: Delete an asset (Admin only).
GET /api/assets/:id/details: Get full asset details with history.
</pre>
<p>Purchases</p>
<pre class="language-text">POST /api/purchases: Record a purchase (Admin, Logistics Officer).
GET /api/purchases: Get historical purchases.
</pre>
<p>Transfers</p>
<pre class="language-text">POST /api/transfers: Record a transfer (Admin, Logistics Officer).
GET /api/transfers: Get historical transfers.
</pre>
<p>Assignments &amp; Expenditures</p>
<pre class="language-text">POST /api/assignments: Assign an asset (Admin, Base Commander, Logistics Officer).
GET /api/assignments: Get historical assignments.
POST /api/expenditures: Record an expenditure (Admin, Base Commander, Logistics Officer).
GET /api/expenditures: Get historical expenditures.
</pre>
<p>Dashboard</p>
<pre class="language-text">GET /api/dashboard/metrics: Get dashboard key metrics.
GET /api/dashboard/net-movement-details: Get detailed net movement breakdown.
</pre>
<h2 id="thanks">Thanks </h2>

      </div>
      
      
    
    
    
    
    
    
  
    </body></html>